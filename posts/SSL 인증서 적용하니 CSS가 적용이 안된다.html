<html>
  <head>
    <!-- ì‚¬ì´íŠ¸ ì œëª© -->
    <title>icehongssii</title>
    <!-- ì‚¬ì´íŠ¸ favicon -->
    <link
      rel="icon"
      href="/static/assets/icepersimmon.png"
      type="image/x-icon"
    />
    <meta charset="utf-8" />
    <!-- ì½”ë“œí•˜ì´ë¼ì´í„° -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlightjs-line-numbers.js/dist/highlightjs-line-numbers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/dockerfile.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/shell.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
    <!-- ì‚¬ì´íŠ¸ ë©”íƒ€ë°ì´í„°-->
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <meta name="description" content="MOM, I am gonna rock" />
    <meta property="og:description" content="MOM, I am gonna rock" />
    <meta name="author" content="" />
    <!-- cssíŒŒì¼-->
    <link rel="stylesheet" type="text/css" href="/static/style.css" />
    <!-- RSSí”¼ë“œ-->
    <link
      rel="alternate"
      type="application/rss+xml"
      title="icehongssii"
      href="/feed.xml"
    />
  </head>

  <body>
    <div id="MathJax_Message" style="display: none"></div>
    <header>
      <!--ì‚¬ì´íŠ¸ ë©”íƒ€ë°ì´í„°-->
      <div class="container">
        <div class="site-info">
          <a href="/" class="site-title">icehongssii</a>
          <p class="site-description">MOM, I am gonna rock</p>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---ì‚¬ì´íŠ¸ë©”íƒ€-->

        <!--í—¤ë”-->
        <div class="grower"></div>
        <!--ë„¤ì´ê²Œì´ì…˜ë°” 3ê°œ-->
        <nav class="site-nav">
          <a href="/career"><img src="/static/assets/sun.svg" /></a>
          <p>ABOUT</p>
        </nav>
        <nav class="site-nav">
          <a href="/posts"><img src="/static/assets/monster.svg" /></a>
          <p>POSTS</p>
        </nav>
        <nav class="site-nav">
          <a href="/tags"><img src="/static/assets/cloud.svg" /></a>
          <p>TAGS</p>
        </nav>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---ë„¤ì´ê²Œì´ì…˜ë°”3ê°œ-->
      </div>
      <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---í—¤ë”-->
    </header>

    <!--ìµœìƒë‹¨ container-->
    <div id="main" role="main" class="container">
      <!--ë³¸ë¬¸article-->
      <article class="post-page">
        <h1 class="title">SSL ì¸ì¦ì„œ ì ìš©í•˜ë‹ˆ CSSê°€ ì ìš©ì´ ì•ˆëœë‹¤</h1>
        <!--ìˆ˜ì •ë‚ ì§œ-->
        <div class="date">
          <strong
            >ë§ˆì§€ë§‰ìˆ˜ì • 2024-03-15 16:52 - ìµœì´ˆì‘ì„±2024-03-15 16:52
          </strong>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!--ìˆ˜ì •ë‚ ì§œ-->

        <!--ë©”íƒ€ë°ì´í„°-->
        <div class="meta-information">
          <table>
            <tr>
              <td><strong>íƒœê·¸</strong></td>
              <td>
                
                <a href="/tags#troubleshooting"><span>troubleshooting</span></a>
                
                <a href="/tags#python"><span>python</span></a>
                
              </td>
            </tr>
            <tr>
              <td><strong>tl;dr</strong></td>
              <td></td>
            </tr>
          </table>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---ë©”íƒ€ë°ì´í„°-->

        <!--ë§ˆí¬ë‹¤ìš´ë³€í™˜ëœë‚´ìš© ë³¸ë¬¸-->
        <div class="entry"><h2>ğŸ‘¯â€â™‚ï¸ ë¬¸ì œ; Mixed Content Error</h2>

<p><img src="https://i.imgur.com/1AePkzE.png" alt="" /></p>

<p>ì‚¬ì´íŠ¸ì˜ ë‚´ìš©ë¬¼ì€ ì œëŒ€ë¡œ ë‚˜ì˜¤ëŠ”ë° ìŠ¤íƒ€ì¼ì´ ì ìš©ë˜ì§€ ì•Šì•˜ë‹¤!</p>

<pre><code class="ad-error language-ad-error">title: Mixed Content Error
Mixed Content: The page at 'https://xxx.icehongssii.xyz/' was loaded over HTTPS, but requested an insecure stylesheet 'http://xxx.icehongssii.xyz/static/style.css'. This request has been blocked; the content must be served over HTTPS.
</code></pre>

<h2>ğŸ‘¯â€â™‚ï¸ Mixed Content Errorë€?</h2>

<ul>
<li>ìƒê°ë³´ë‹¤ ì •ì˜ëœì§€ ì–¼ë§ˆ ì•ˆëœ ì—ëŸ¬ì´ë‹¤</li>
<li>2020ë…„ë¶€í„° í¬ë¡¬ê³¼ íŒŒì´ì–´í­ìŠ¤ì—ì„œëŠ” <code>https://</code>ë¡œ ë¡œë”©ë˜ì§€ ì•ŠëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì°¨ë‹¨í•œë‹¤ê³  ë°œí‘œí–ˆë‹¤</li>
<li><a href="https://cert.crosscert.com/%EF%BB%BFhttps-%ED%81%AC%EB%A1%AC%EA%B3%BC-%ED%8C%8C%EC%9D%B4%EC%96%B4%ED%8F%AD%EC%8A%A4-%ED%98%BC%ED%95%A9-%EC%BB%A8%ED%85%90%EC%B8%A0mixed-content-%EC%B0%A8%EB%8B%A8/">Mixed Content ì—ëŸ¬ëŠ” ì›¹ í˜ì´ì§€ê°€ HTTPSë¥¼ í†µí•´ ì•ˆì „í•˜ê²Œ ë¡œë“œë˜ì—ˆì§€ë§Œ, í˜ì´ì§€ì˜ ì¼ë¶€ ìì›(ì˜ˆ: ìŠ¤íƒ€ì¼ì‹œíŠ¸, ìŠ¤í¬ë¦½íŠ¸, ì´ë¯¸ì§€ ë“±)ì´ ì•ˆì „í•˜ì§€ ì•Šì€ HTTPë¥¼ í†µí•´ ìš”ì²­ë˜ì—ˆì„ ë•Œ ë°œìƒ. ì´ ê²½ìš° ë¸Œë¼ìš°ì €ëŠ” ì•ˆì „í•˜ì§€ ì•Šì€ ìì›ì˜ ë¡œë“œë¥¼ ì°¨ë‹¨í•˜ì—¬ ì‚¬ìš©ìì˜ ë³´ì•ˆì„ ìœ ì§€í•¨. </a></li>
<li><a href="https://cert.crosscert.com/%EF%BB%BFhttps-%ED%81%AC%EB%A1%AC%EA%B3%BC-%ED%8C%8C%EC%9D%B4%EC%96%B4%ED%8F%AD%EC%8A%A4-%ED%98%BC%ED%95%A9-%EC%BB%A8%ED%85%90%EC%B8%A0mixed-content-%EC%B0%A8%EB%8B%A8/">ì™œëƒë©´ ë³´ì•ˆìƒì˜ ë¬¸ì œê°€ ìˆê¸° ë•Œë¬¸. ë³´ì•ˆë˜ì§€ ì•Šì€ HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ í•˜ìœ„ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ëŠ” ê²½ìš° í•´ë‹¹ ìš”ì²­ì€ ê³µê²©ìê°€ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ë„ì²­í•˜ê³  ì–‘ì ê°„ í†µì‹ ì„ ë³´ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ” ìˆ˜ë‹¨ì¸ ì¤‘ê°„ì(man-in-the-middle) ê³µê²©ì— ì·¨ì•½í•˜ë¯€ë¡œ ì „ì²´ í˜ì´ì§€ì˜ ë³´ì•ˆì´ ì•½í™”ëœë‹¤ê³  í•œë‹¤</a></li>
</ul>

<h2>ğŸ‘¯â€â™‚ï¸ í•´ê²°ë°©ë²•; ì›¹ í˜ì´ì§€ë‚´ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ Httpsë¡œ ë³€ê²½í•œë‹¤</h2>

<ul>
<li><p>ì²˜ìŒì—ëŠ” ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•´ì•¼í•˜ë‚˜ ì‹¶ì—ˆì§€ë§Œ ì´ë¯¸ë‚´ ì›¹ì‚¬ì´íŠ¸ ECS serviceì— ALBë¥¼ ë¶™ì˜€ê³  ì´ë¯¸ ë¡œë“œ ë°¸ëŸ°ì„œ ë³´ì•ˆê·¸ë£¹ì—ì„œ 80ë²ˆ í¬íŠ¸ë¡œ ì˜¤ëŠ” ìš”ì²­ì€ 443ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ê°€ ë˜ë„ë¡ ì„¤ì •ë˜ì–´ìˆë‹¤. ë”°ë¼ì„œ ëª¨ë“  ìš”ì²­ì€ httpsë¥¼ í†µí•´ì„œ ì´ë£¨ì–´ì§€ê³ ìˆë‹¤<br />
<img src="https://i.imgur.com/RLMxmaB.png" alt="" /></p></li>
<li><p>ê·¸ë˜ì„œ ì¡°ê¸ˆ ë” ì°¾ì•„ë³´ë‹ˆ  í™•ì¸í•´ë³´ë‹ˆ ì½”ë“œë ˆë²¨ì—ì„œ ìˆ˜ì •í•´ì•¼í•˜ëŠ” ë¶€ë¶„ì´ ìˆëŠ”ë“¯í•˜ë‹¤. ì •í™•í•œ ì›ì¸ì€ ëª¨ë¥´ê² ì§€ë§Œ.. ë‚˜ì™€ ë¹„ìŠ·í•œ ì¼€ì´ìŠ¤ê°€ ìˆì—ˆë‹¤. url_forì´ httpsëŒ€ì‹  httpìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°ì˜€ë‹¤. ë”°ë¼ì„œ ì•„ë˜ì˜ ë‘ê°€ì§€ ì˜ˆì œë¥¼ ì°¸ì¡°í•´ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤ </p>

<ul>
<li><a href="https://stackoverflow.com/questions/51287411/flask-url-for-generates-http-instead-of-https-when-running-by-docker">ì›¹, ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°, url_for generates http instead of https when running by docker</a></li>
<li><a href="https://stackoverflow.com/questions/70521784/fastapi-links-created-by-url-for-in-jinja2-template-use-http-instead-of-https">ì›¹, ìŠ¤íƒì˜¤ë²„ í”Œë¡œìš°, FastAPI links created by url_for in Jinja2 template use HTTP instead of HTTPS</a></li>
</ul></li>
</ul>

<pre><code class="python language-python">from starlette.middleware.base import BaseHTTPMiddleware
from starlette.requests import Request
from starlette.responses import Response

class HTTPSRedirectMiddleware(BaseHTTPMiddleware):
    async def dispatch(self, request: Request, call_next):
        # Change the scheme to https
        request.scope['scheme'] = 'https'
        response = await call_next(request)
        return response
app.add_middleware(HTTPSRedirectMiddleware)
</code></pre>

<p>ê·¸ëŸ°ë° ë¡œì»¬ì—ì„œëŠ” ì´ì œ ì•„ì˜ˆ ê²½ë¡œë¥¼ ëª»ì½ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤;; ì•„ì˜ˆ ì´ë¯¸ì§€ê°€ ë¡œë”©ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤ (Invalid request) ì™œëƒë©´ ë¡œì»¬ì—ëŠ” SSL ì¸ì¦ì„œê°€ ì—†ê¸°ë•Œë¬¸ì—.. ë”°ë¼ì„œ  ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í–ˆë‹¤</p>

<pre><code class="python language-python">from fastapi import FastAPI
from starlette.middleware.httpsredirect import HTTPSRedirectMiddleware
import os

app = FastAPI()

# í™˜ê²½ ë³€ìˆ˜ë¥¼ ì²´í¬í•˜ì—¬ ë¡œì»¬ í™˜ê²½ì´ ì•„ë‹ ë•Œë§Œ HTTPSRedirectMiddlewareë¥¼ ì ìš©í•©ë‹ˆë‹¤.
if os.getenv("ENVIRONMENT") != "local":
    app.add_middleware(HTTPSRedirectMiddleware)
</code></pre>

<p><img src="https://i.imgur.com/ohTywYl.png" alt="" /></p>

<hr />

<h2>ğŸ‘¯â€â™‚ï¸ Ref &amp; LINKS TO THIS PAGE</h2>

<ul>
<li><a href="https://www.miketheman.net/2021/12/28/container-to-container-communication/">ì›¹, ecs fastapiì™€ ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì ìš©ì˜ˆì‹œ  </a></li>
<li><a href="https://stackoverflow.com/questions/51287411/flask-url-for-generates-http-instead-of-https-when-running-by-docker">ì›¹, ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°, url_for generates http instead of https when running by docker</a></li>
<li><a href="https://stackoverflow.com/questions/70521784/fastapi-links-created-by-url-for-in-jinja2-template-use-http-instead-of-https">ì›¹, ìŠ¤íƒì˜¤ë²„ í”Œë¡œìš°, FastAPI links created by url_for in Jinja2 template use HTTP instead of HTTPS</a></li>
<li><a href="https://stackoverflow.com/questions/70521784/fastapi-links-created-by-url-for-in-jinja2-template-use-http-instead-of-https">ì›¹, alb ë¦¬ë‹¤ì´ë ‰íŠ¸</a></li>
<li>https://cert.crosscert.com/%EF%BB%BFhttps-%ED%81%AC%EB%A1%AC%EA%B3%BC-%ED%8C%8C%EC%9D%B4%EC%96%B4%ED%8F%AD%EC%8A%A4-%ED%98%BC%ED%95%A9-%EC%BB%A8%ED%85%90%EC%B8%A0mixed-content-%EC%B0%A8%EB%8B%A8/</li>
</ul>
</div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!--ë§ˆí¬ë‹¤ìš´ë³€í™˜ëœë‚´ìš© ë³¸ë¬¸-->

        <!--ëŒ“ê¸€-->
        <hr />
        <div>
          <script
            src="https://utteranc.es/client.js"
            repo="icehongssii/icehongssii.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async
          ></script>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!--ëŒ“ê¸€-->

        <!--í™ì”¨ë°”ë‹¥-->
        <div>
          <center>
            <img src="/static/assets/icepersimmon.png" class="my-icon" />
          </center>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---í™ì”¨ë°”ë‹¥-->
      </article>
      <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---ë³¸ë¬¸article-->
    </div>
    <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!--ìµœìƒë‹¨ container-->

    <footer>
      <div class="container">
        <p><a href="mailto:icehongssii@gmail.com">icehongssii@gmail.com</a></p>
        <p><a href="https://github.com/icehongssii">GitHub @icehongssii</a></p>
      </div>
    </footer>
    <!-- Google Analytics -->
    <!-- End Google Analytics -->
  </body>
</html>