<html>
  <head>
    <!-- 사이트 제목 -->
    <title>icehongssii</title>
    <!-- 사이트 favicon -->
    <link
      rel="icon"
      href="/static/assets/icepersimmon.png"
      type="image/x-icon"
    />
    <meta charset="utf-8" />
    <!-- 코드하이라이터 -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlightjs-line-numbers.js/dist/highlightjs-line-numbers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/dockerfile.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/shell.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
    <!-- 사이트 메타데이터-->
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
    />
    <meta name="description" content="MOM, I am gonna rock" />
    <meta property="og:description" content="MOM, I am gonna rock" />
    <meta name="author" content="" />
    <!-- css파일-->
    <link rel="stylesheet" type="text/css" href="/static/style.css" />
    <!-- RSS피드-->
    <link
      rel="alternate"
      type="application/rss+xml"
      title="icehongssii"
      href="/feed.xml"
    />
  </head>

  <body>
    <div id="MathJax_Message" style="display: none"></div>
    <header>
      <!--사이트 메타데이터-->
      <div class="container">
        <div class="site-info">
          <a href="/" class="site-title">icehongssii</a>
          <p class="site-description">MOM, I am gonna rock</p>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---사이트메타-->

        <!--헤더-->
        <div class="grower"></div>
        <!--네이게이션바 3개-->
        <nav class="site-nav">
          <a href="/career"><img src="/static/assets/sun.svg" /></a>
          <p>ABOUT</p>
        </nav>
        <nav class="site-nav">
          <a href="/posts"><img src="/static/assets/monster.svg" /></a>
          <p>POSTS</p>
        </nav>
        <nav class="site-nav">
          <a href="/tags"><img src="/static/assets/cloud.svg" /></a>
          <p>TAGS</p>
        </nav>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---네이게이션바3개-->
      </div>
      <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---헤더-->
    </header>

    <!--최상단 container-->
    <div id="main" role="main" class="container">
      <!--본문article-->
      <article class="post-page">
        <h1 class="title">무한 횡스크롤 표현</h1>
        <!--수정날짜-->
        <div class="date">
          <strong
            >마지막수정 2024-03-19 11:43 - 최초작성2024-03-19 10:44
          </strong>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!--수정날짜-->

        <!--메타데이터-->
        <div class="meta-information">
          <table>
            <tr>
              <td><strong>태그</strong></td>
              <td>
                
                <a href="/tags#gameDev"><span>gameDev</span></a>
                
                <a href="/tags#toyproject"><span>toyproject</span></a>
                
              </td>
            </tr>
            <tr>
              <td><strong>tl;dr</strong></td>
              <td>배경을 계속 움직여 입체감을 주자</td>
            </tr>
          </table>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---메타데이터-->

        <!--마크다운변환된내용 본문-->
        <div class="entry"><pre><code class="ad-note language-ad-note">title: 키워드
- parallx scrolling
</code></pre>

<h2>👯‍♂️ 무한 횡스크롤 어떻게 현 할 것인가?, Parallax Scroll</h2>

<p>내 목표는 크롬 다이노 게임 허접한 버전을 만드는것이다 </p>

<table>
<thead>
<tr>
  <th>크롬 다이노</th>
  <th>parallax scroll이란</th>
  <th>parallx scroll적용 유명게임</th>
</tr>
</thead>
<tbody>
<tr>
  <td><img src="https://imgur.com/elhVFGM.png" alt="" /></td>
  <td><img src="https://i.imgur.com/NLnvbid.png" alt="" /></td>
  <td><img src="https://www.youtube.com/watch?v=3VdFCSR1kOI" alt="" /></td>
</tr>
<tr>
  <td></td>
  <td></td>
  <td></td>
</tr>
</tbody>
</table>

<p>보면 티라노는 계속 뛰고 뒤의 구름도 반복해서 계속 나온다..이게 뭔가해서 찾아보니 이럴걸</p>

<blockquote>
  <p>찾아보니 패럴럭스 스크롤링이라고하는데 여러개의 배경 레이어가 있을 때 가장 앞에 있는 레이어의 속도가 빠르게 움직이고 뒤에 있는 레이어들은 갈수록 천천히 움직여 착시효과로 깊이감을 주는 기법을 말한다</p>
</blockquote>

<p>내가 구현하고 싶은것은 여러개의 배경은 아니긴 하지만 검색하면 대부분의 유튜브에서 크롬 티라노 게임을 패럴럭스 스크롤링이라고 칭해서 그냥 그렇게 생각하기로했다…</p>

<p><img src="https://imgur.com/7nUg6KV.png" alt="" /></p>

<h2>👯‍♂️ 무한히 계속 이어지는 땅을 만들자</h2>

<ul>
<li>땅은 계속해서 나오게 만들어야한다</li>
<li>사실 이것도 되게 간단한 것 같다.. 그냥 뭔가  <code>땅*9999999</code> 이런식으로 할 순없나? 하지만 게임 화면내에서 보여 줄 수 있는게 한정적이니 말이 안되긴함</li>
<li>그러면 땅이 계속 반복해서 나오도록하자!</li>
</ul>

<p>씬은 아래처럼 구성되어있고 </p>

<pre><code>World(Node2D)
- Player(CharacterBody2D)
- GroundContainer(Node2D)
- ParallaxBackground(ParallaxBackground)
</code></pre>

<p>아래는 <code>GroundContainer</code> 씬과 연결된 스크립트이다.</p>

<pre><code class="python language-python">extends Node2D
const ground = preload("res://tile_map.tscn")
const groundwidth = 5785
var spawn_position = global_position
@onready var player = get_parent().get_node("Player")
# Called when the node enters the scene tree for the first time.
func _ready():

    pass

func _process(delta):
    if player.global_position.x &gt; spawn_position.x - groundwidth: # Add 
        spawn_ground()


func spawn_ground():        
    var instance = ground.instantiate()
    add_child(instance)
    instance.global_position.x = spawn_position.x
    instance.global_position.y = 70
    spawn_position.x += groundwidth

# TODO! 처음에 인스턴스가 두개씩 생성돼서 강제로 삭제 화면에서 삭ㅈ제 부자연스러
    if get_child_count() &gt; 2 :
        get_children()[0].queue_free()
</code></pre>

<p>코드를 자세히 보자면</p>

<pre><code class="python language-python">if player.global_position.x &gt; spawn_position.x - groundwidth:
    spawn_ground()
</code></pre>

<ol>
<li>플레이어의 위치(<code>player.global_position.x</code>)가 특정 조건을 만족할 때 새로운 지면(<code>ground</code>)을 생성하는 로직이다.</li>
</ol>

<p>여기서 조건은 <code>player.global_position.x</code>가 <code>spawn_position.x - groundwidth</code>인데
- <code>spawn_position</code> =&gt;  :처음에는 이 groundcontainer 위치로 지정되고 지면이 생성될 위치를 저장하는 변수다
-  <code>groundwidth</code> =&gt;  내가 미리 만들어 놓은 ground 스프라이트의 가로 길이
- player.global<em>position.x &gt; spawn</em>position.x - groundwidth 는 플레이어가 지면의 오른쪽 끝에 다다랐을 때를 의미한다 </p>

<ol start="2">
<li>spawn_ground() 새로운 땅을 호출하는 함수</li>
</ol>

<pre><code class="python language-python">func spawn_ground():        
    var instance = ground.instantiate()
    add_child(instance)
    instance.global_position.x = spawn_position.x
    instance.global_position.y = 70
    spawn_position.x += groundwidth
</code></pre>

<ul>
<li><code>add_child(instance)</code>: 생성된 지면 인스턴스를 현재 노드의 자식으로 추가합니다. 이것은 Godot의 씬에서 새 지면을 실제로 추가한다</li>
<li>. <code>instance.global_position.x = spawn_position.x</code>: 새로 생성된 지면 인스턴스의 전역 x 위치를 <code>spawn_position.x</code>로 설정</li>
<li><code>spawn_position.x += groundwidth</code>: 다음 지면이 생성될 x 위치를 업데이트</li>
</ul>

<ol start="3">
<li>화면에 두개의 땅이 있으면 안되므로 노드 자식(=땅)이 두개 생성되면 하나는 삭제</li>
</ol>

<pre><code class="python language-python">if get_child_count() &gt; 2 :
    get_children()[0].queue_free()
</code></pre>

<h2>👯‍♂️ 타일맵에 Collision기능을 추가하자!</h2>

<p>땅이 staticbody로 이루어진게 아니라 타일맵 자체에 collision 기능이 없었다 그래서 타일셋에서 직접 넣어줘야한다.</p>

<ul>
<li>타일맵이용 + physicslayer를 추가해서 (이게 collision효과를줌) </li>
</ul>

<table>
<thead>
<tr>
  <th>플레이어가 공중에 떠있는 것 같다</th>
  <th>디버그 모드를 보니...</th>
</tr>
</thead>
<tbody>
<tr>
  <td><img src="https://i.imgur.com/aVfSvLU.png" alt="" /></td>
  <td><img src="https://i.imgur.com/HSCcB8v.png" alt="" /></td>
</tr>
</tbody>
</table>

<p>디버그 모드로 보니 collisionshape가 엄청두꺼워서 생긴 문제이다 따라서<br />
타일셋에서 collisionshape를 수정해준다<br />
이때 꼭 적용해주기!</p>

<table>
<thead>
<tr>
  <th>적용전</th>
  <th>적용후</th>
</tr>
</thead>
<tbody>
<tr>
  <td><img src="https://i.imgur.com/TpmbvO8.png" alt="" /></td>
  <td><img src="https://i.imgur.com/sKWJTpL.png" alt="" /></td>
</tr>
</tbody>
</table>

<p>성공!<br />
<img src="https://i.imgur.com/d5AqtdT.png" alt="" /></p>

<h2>👯‍♂️ Ref &amp; LINKS TO THIS PAGE</h2>

<ul>
<li><a href="https://youtu.be/1k0hKUtZrq0">유튜브, godot-parallax scrollling</a></li>
<li>https://youtube.com/shorts/S8vri9gxQHM?si=8ThaXBeYuUYb71nK</li>
</ul>
</div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!--마크다운변환된내용 본문-->

        <!--댓글-->
        <hr />
        <div>
          <script
            src="https://utteranc.es/client.js"
            repo="icehongssii/icehongssii.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async
          ></script>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!--댓글-->

        <!--홍씨바닥-->
        <div>
          <center>
            <img src="/static/assets/icepersimmon.png" class="my-icon" />
          </center>
        </div>
        <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---홍씨바닥-->
      </article>
      <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---본문article-->
    </div>
    <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!--최상단 container-->

    <footer>
      <div class="container">
        <p><a href="mailto:icehongssii@gmail.com">icehongssii@gmail.com</a></p>
        <p><a href="https://github.com/icehongssii">GitHub @icehongssii</a></p>
      </div>
    </footer>
    <!-- Google Analytics -->
    <!-- End Google Analytics -->
  </body>
</html>